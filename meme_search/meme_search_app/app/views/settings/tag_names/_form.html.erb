<%= form_with model: [:settings, tag_name], class: "w-full" do |form| %>
  <div class="flex flex-col space-y-6">

    <!-- Tag Name Field -->
    <div class="w-full">
      <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
        Tag Name
      </label>
      <%= form.text_field :name,
        placeholder: "Enter tag name...",
        class: "w-full px-4 py-3 text-gray-700 dark:text-gray-200 bg-white/80 dark:bg-slate-700/80 backdrop-blur-lg border-2 border-indigo-200/50 dark:border-indigo-700/50 rounded-2xl shadow-lg focus:outline-none focus:ring-4 focus:ring-indigo-500/50 dark:focus:ring-indigo-600/50 focus:border-indigo-500 dark:focus:border-indigo-600 transition-all",
        id: "new_tag_name_text_area" %>
    </div>

    <!-- Color Picker Section -->
    <div class="w-full" data-controller="color-preview">
      <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
        Tag Color
      </label>

      <div class="bg-white/80 dark:bg-slate-700/80 backdrop-blur-lg border-2 border-indigo-200/50 dark:border-indigo-700/50 rounded-2xl p-6 shadow-lg">

        <!-- Color Preview Badge -->
        <div class="flex items-center justify-center mb-6">
          <span class="inline-flex items-center px-8 py-4 rounded-full text-2xl font-medium shadow-md transition-all"
                data-color-preview-target="previewBadge"
                style="background-color: <%= tag_name.color || '#ba1e03' %>33; color: <%= tag_name.color || '#ba1e03' %>; border: 2px solid <%= tag_name.color || '#ba1e03' %>;">
            <span class="w-4 h-4 rounded-full mr-3"
                  data-color-preview-target="preview"
                  style="background-color: <%= tag_name.color || '#ba1e03' %>;"></span>
            Preview
          </span>
        </div>

        <!-- Color Input -->
        <div class="flex items-center justify-center space-x-4">
          <div class="flex items-center space-x-3">
            <span class="text-gray-600 dark:text-gray-400 font-medium">Pick Color:</span>
            <%= form.text_field :color,
              id: 'hex_color_bg',
              value: tag_name.color || '#ba1e03',
              data: { action: "input->color-preview#update", color_preview_target: "color" },
              type: 'color',
              class: "h-12 w-24 rounded-xl cursor-pointer border-2 border-gray-300 dark:border-gray-600 shadow-md hover:shadow-lg transition-all" %>
          </div>

          <div class="flex items-center space-x-2">
            <span class="text-gray-600 dark:text-gray-400 font-medium">Hex:</span>
            <span class="font-mono text-lg text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-slate-600 px-3 py-1 rounded-lg"
                  data-color-preview-target="hexDisplay">
              <%= tag_name.color || '#ba1e03' %>
            </span>
          </div>
        </div>

      </div>
    </div>

    <!-- Submit Button -->
    <div class="flex justify-center pt-4">
      <%= form.submit "Save Tag", class: submit_button_classes + " w-full sm:w-auto" %>
    </div>

  </div>
<% end %>