<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter Sidebar Demo - MemeSearch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Slide-in and slide-out animations for dialog */
        dialog.slideover[open] {
            animation: slide-in-from-left 300ms forwards ease-in-out;
        }

        dialog.slideover[closing] {
            pointer-events: none;
            animation: slide-out-to-left 300ms forwards ease-in-out;
        }

        @keyframes slide-in-from-left {
            from {
                transform: translateX(-100%);
            }
            to {
                transform: translateX(0);
            }
        }

        @keyframes slide-out-to-left {
            from {
                transform: translateX(0);
            }
            to {
                transform: translateX(-100%);
            }
        }

        /* Dialog backdrop */
        dialog::backdrop {
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-300 dark:from-slate-900 dark:to-slate-700 min-h-screen text-black dark:text-white">
    <!-- Navigation with Glassmorphism -->
    <nav class="bg-gray-300/80 dark:bg-slate-700/80 backdrop-blur-xl border-b border-white/20 dark:border-white/10 shadow-lg fixed top-0 left-0 right-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="gallery-after-tailwind.html" class="text-2xl font-bold text-slate-800 dark:text-white">
                    MemeSearch
                </a>

                <ul class="flex space-x-8">
                    <li>
                        <a href="gallery-after-tailwind.html" class="text-black bg-fuchsia-300 px-3 py-2 rounded-xl">
                            All memes
                        </a>
                    </li>
                    <li>
                        <a href="search-tailwind.html" class="text-slate-800 dark:text-white hover:text-fuchsia-600 dark:hover:text-fuchsia-400 transition px-3 py-2 rounded-lg hover:bg-white/30">
                            Search memes
                        </a>
                    </li>
                    <li>
                        <a href="settings-tags-index.html" class="text-slate-800 dark:text-white hover:text-fuchsia-600 dark:hover:text-fuchsia-400 transition px-3 py-2 rounded-lg hover:bg-white/30">
                            Settings
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-6 pt-28 pb-12">
        <!-- Control Buttons -->
        <div class="flex flex-col items-center mb-8 space-y-4">
            <h1 class="text-3xl font-bold text-slate-800 dark:text-slate-200 mb-4">
                Filter Sidebar Demo
            </h1>
            <div class="flex flex-wrap gap-4 justify-center">
                <button
                    id="openFiltersBtn"
                    onclick="openFilters()"
                    class="px-6 py-3 text-white font-semibold bg-gradient-to-r from-blue-500 to-blue-700 rounded-2xl shadow-lg hover:shadow-xl hover:scale-105 transition-all">
                    Open filters
                </button>
                <button
                    id="viewToggleBtn"
                    onclick="toggleView()"
                    class="px-6 py-3 text-white font-semibold bg-gradient-to-r from-purple-500 to-purple-700 rounded-2xl shadow-lg hover:shadow-xl hover:scale-105 transition-all">
                    Switch to Grid View
                </button>
            </div>
        </div>

        <!-- Sample Gallery Content (to show backdrop effect) -->
        <div id="galleryContent" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            <div class="bg-slate-200/90 dark:bg-slate-700/90 backdrop-blur-lg rounded-2xl p-2 shadow-lg">
                <img src="https://picsum.photos/300/200?random=1" alt="Meme" class="rounded-lg w-full">
            </div>
            <div class="bg-slate-200/90 dark:bg-slate-700/90 backdrop-blur-lg rounded-2xl p-2 shadow-lg">
                <img src="https://picsum.photos/300/250?random=2" alt="Meme" class="rounded-lg w-full">
            </div>
            <div class="bg-slate-200/90 dark:bg-slate-700/90 backdrop-blur-lg rounded-2xl p-2 shadow-lg">
                <img src="https://picsum.photos/300/220?random=3" alt="Meme" class="rounded-lg w-full">
            </div>
            <div class="bg-slate-200/90 dark:bg-slate-700/90 backdrop-blur-lg rounded-2xl p-2 shadow-lg">
                <img src="https://picsum.photos/300/280?random=4" alt="Meme" class="rounded-lg w-full">
            </div>
        </div>
    </div>

    <!-- Filter Sidebar Dialog -->
    <dialog
        id="filterDialog"
        class="slideover h-full max-h-full m-0 w-96 p-8 bg-white/95 dark:bg-slate-800/95 backdrop-blur-xl border-r border-white/20 dark:border-white/10 shadow-2xl">

        <div class="flex flex-col h-full">
            <!-- Close Button -->
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-slate-800 dark:text-white">Filters</h2>
                <button
                    onclick="closeFilters()"
                    class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <form id="filterForm" onsubmit="applyFilters(event)" class="flex flex-col space-y-6 flex-1">
                <!-- Tags Filter -->
                <div class="flex flex-col space-y-3">
                    <label class="text-sm font-semibold text-gray-700 dark:text-gray-300">Tags</label>

                    <div class="relative">
                        <button
                            type="button"
                            id="tagFilterBtn"
                            onclick="toggleTagFilter()"
                            class="w-full px-4 py-3 text-left bg-white/90 dark:bg-slate-700/90 backdrop-blur-lg border border-gray-300 dark:border-gray-600 rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-between">
                            <span class="text-gray-900 dark:text-white" id="selectedTagsFilter">Choose tags</span>
                            <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>

                        <div
                            id="tagFilterDropdown"
                            class="hidden absolute left-0 right-0 mt-2 bg-white/95 dark:bg-slate-800/95 backdrop-blur-xl border border-white/20 dark:border-white/10 rounded-2xl shadow-2xl z-10 max-h-48 overflow-y-auto">
                            <div class="p-3 space-y-2">
                                <label class="flex items-center px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg cursor-pointer transition">
                                    <input type="checkbox" value="funny" class="mr-3 rounded" onchange="updateTagFilterSelection()">
                                    <span>funny</span>
                                </label>
                                <label class="flex items-center px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg cursor-pointer transition">
                                    <input type="checkbox" value="programming" class="mr-3 rounded" onchange="updateTagFilterSelection()">
                                    <span>programming</span>
                                </label>
                                <label class="flex items-center px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg cursor-pointer transition">
                                    <input type="checkbox" value="debugging" class="mr-3 rounded" onchange="updateTagFilterSelection()">
                                    <span>debugging</span>
                                </label>
                                <label class="flex items-center px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg cursor-pointer transition">
                                    <input type="checkbox" value="relatable" class="mr-3 rounded" onchange="updateTagFilterSelection()">
                                    <span>relatable</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Paths Filter -->
                <div class="flex flex-col space-y-3">
                    <label class="text-sm font-semibold text-gray-700 dark:text-gray-300">Paths</label>

                    <div class="relative">
                        <button
                            type="button"
                            id="pathFilterBtn"
                            onclick="togglePathFilter()"
                            class="w-full px-4 py-3 text-left bg-white/90 dark:bg-slate-700/90 backdrop-blur-lg border border-gray-300 dark:border-gray-600 rounded-2xl shadow-lg hover:shadow-xl transition-all flex items-center justify-between">
                            <span class="text-gray-900 dark:text-white" id="selectedPathsFilter">Choose paths</span>
                            <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>

                        <div
                            id="pathFilterDropdown"
                            class="hidden absolute left-0 right-0 mt-2 bg-white/95 dark:bg-slate-800/95 backdrop-blur-xl border border-white/20 dark:border-white/10 rounded-2xl shadow-2xl z-10 max-h-48 overflow-y-auto">
                            <div class="p-3 space-y-2">
                                <label class="flex items-center px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg cursor-pointer transition">
                                    <input type="checkbox" value="example_memes_1" class="mr-3 rounded" onchange="updatePathFilterSelection()">
                                    <span>example_memes_1</span>
                                </label>
                                <label class="flex items-center px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg cursor-pointer transition">
                                    <input type="checkbox" value="example_memes_2" class="mr-3 rounded" onchange="updatePathFilterSelection()">
                                    <span>example_memes_2</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Has Embeddings Checkbox -->
                <div class="flex flex-col space-y-3">
                    <div class="bg-white/90 dark:bg-slate-700/90 backdrop-blur-lg border border-gray-300 dark:border-gray-600 rounded-2xl p-4 shadow-lg">
                        <label class="flex items-center justify-center cursor-pointer">
                            <span class="text-gray-900 dark:text-white font-semibold mr-3">Has embeddings?</span>
                            <input
                                type="checkbox"
                                id="hasEmbeddingsCheckbox"
                                checked
                                class="w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2">
                        </label>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col space-y-3 mt-auto pt-6">
                    <button
                        type="submit"
                        class="px-6 py-3 text-white font-semibold bg-gradient-to-r from-emerald-400 to-emerald-600 rounded-2xl shadow-lg hover:shadow-xl hover:scale-105 transition-all">
                        Apply filters
                    </button>
                    <button
                        type="button"
                        onclick="closeFilters()"
                        class="px-6 py-3 text-gray-700 dark:text-gray-300 font-semibold bg-white/90 dark:bg-slate-700/90 backdrop-blur-lg border border-gray-300 dark:border-gray-600 rounded-2xl shadow-lg hover:shadow-xl transition-all">
                        Close without filtering
                    </button>
                </div>
            </form>
        </div>
    </dialog>

    <script>
        const filterDialog = document.getElementById('filterDialog');
        let currentView = 'list';

        // Open filters dialog
        function openFilters() {
            filterDialog.showModal();
        }

        // Close filters dialog with animation
        function closeFilters() {
            filterDialog.setAttribute('closing', '');
            setTimeout(() => {
                filterDialog.removeAttribute('closing');
                filterDialog.close();
            }, 300);
        }

        // Apply filters
        function applyFilters(event) {
            event.preventDefault();
            alert('Filters applied!');
            closeFilters();
        }

        // Toggle view
        function toggleView() {
            const btn = document.getElementById('viewToggleBtn');
            if (currentView === 'list') {
                currentView = 'grid';
                btn.textContent = 'Switch to List View';
            } else if (currentView === 'grid') {
                currentView = 'masonry';
                btn.textContent = 'Switch to Masonry View';
            } else {
                currentView = 'list';
                btn.textContent = 'Switch to Grid View';
            }
        }

        // Toggle tag filter dropdown
        function toggleTagFilter() {
            const dropdown = document.getElementById('tagFilterDropdown');
            dropdown.classList.toggle('hidden');
            document.getElementById('pathFilterDropdown').classList.add('hidden');
        }

        // Toggle path filter dropdown
        function togglePathFilter() {
            const dropdown = document.getElementById('pathFilterDropdown');
            dropdown.classList.toggle('hidden');
            document.getElementById('tagFilterDropdown').classList.add('hidden');
        }

        // Update tag filter selection
        function updateTagFilterSelection() {
            const checkboxes = document.querySelectorAll('#tagFilterDropdown input[type="checkbox"]:checked');
            const selectedText = document.getElementById('selectedTagsFilter');

            if (checkboxes.length === 0) {
                selectedText.textContent = 'Choose tags';
            } else {
                const tags = Array.from(checkboxes).map(cb => cb.value);
                selectedText.textContent = tags.join(', ');
            }
        }

        // Update path filter selection
        function updatePathFilterSelection() {
            const checkboxes = document.querySelectorAll('#pathFilterDropdown input[type="checkbox"]:checked');
            const selectedText = document.getElementById('selectedPathsFilter');

            if (checkboxes.length === 0) {
                selectedText.textContent = 'Choose paths';
            } else {
                const paths = Array.from(checkboxes).map(cb => cb.value);
                selectedText.textContent = paths.join(', ');
            }
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            const tagDropdown = document.getElementById('tagFilterDropdown');
            const tagBtn = document.getElementById('tagFilterBtn');
            const pathDropdown = document.getElementById('pathFilterDropdown');
            const pathBtn = document.getElementById('pathFilterBtn');

            if (!tagDropdown.contains(e.target) && !tagBtn.contains(e.target)) {
                tagDropdown.classList.add('hidden');
            }

            if (!pathDropdown.contains(e.target) && !pathBtn.contains(e.target)) {
                pathDropdown.classList.add('hidden');
            }
        });

        // Dark mode toggle with 'D' key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'd') {
                document.documentElement.classList.toggle('dark');
            }
        });
    </script>
</body>
</html>
